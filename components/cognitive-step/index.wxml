<!--components/cognitive-step/index.wxml-->
<view class="cognitive-step-container">
  <!-- 进度条 -->
  <view class="progress-container">
    <view class="progress-label">学习进度</view>
    <view class="progress-wrapper">
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{currentProgress}}%"></view>
      </view>
      <view class="progress-text">{{currentProgress}}%</view>
    </view>
  </view>

  <!-- 学习内容 -->
  <scroll-view scroll-y="{{true}}" class="content-container">
    <view 
      wx:for="{{displayedItems}}" 
      wx:key="{{index}}"
      class="content-item {{item.type}}-item {{index === displayedItems.length - 1 ? 'active' : 'completed'}}"
      data-step-index="{{item.stepIndex}}"
      data-sub-index="{{item.subIndex}}"
      bindtap="onItemClick"
    >
      <view class="item-indicator">
        <view class="indicator-dot {{item.type === 'title' ? 'title-dot' : 'sub-dot'}}"></view>
        <view wx:if="{{index < displayedItems.length - 1}}" class="indicator-line"></view>
      </view>
      
      <view class="item-content">
        <view class="item-text {{item.type === 'title' ? 'title-text' : 'sub-text'}}">
          {{item.content}}
        </view>
        
        <!-- 点击提示 -->
        <view wx:if="{{index === displayedItems.length - 1 && currentProgress < 100}}" class="click-hint">
          <text class="hint-text">点击继续</text>
          <view class="hint-arrow">→</view>
        </view>
      </view>
    </view>

    <!-- 完成提示 -->
    <view wx:if="{{currentProgress === 100}}" class="completion-message">
      <view class="completion-icon">✓</view>
      <view class="completion-text">恭喜！您已完成所有认知学习内容</view>
    </view>
  </scroll-view>
</view>